#+TITLE:       升级gnome 47之后修复gnome-flashback hidpi问题
#+AUTHOR:      Shane Xu
#+EMAIL:       xusheng0711@gmail.com
#+DATE:        2024-09-26 Thu
#+URI:         /blog/%y/%m/%d/fix-gnome-flashback-hidpi
#+KEYWORDS:    gnome
#+TAGS:        gnome
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: <TODO: insert your description here>

昨天arch升级gnome 47之后发现我目前正在使用的[[https://aur.archlinux.org/packages/gnome-flashback-xmonad-nopanel][gnome-flashback-xmonad-nopanel]]会话的缩放出问题了。现象就是在我的4k显示器下，kitty、emacs等应用显示的非常小。
然而切换到gnome-shell会话则没有问题。

于是就翻起了arch关于[[https://wiki.archlinux.org/title/HiDPI][HiDPI]]的wiki。

#+begin_quote
GNOME ignores X settings due to its xsettings Plugin in Gnome Settings Daemon, where DPI setting is hard coded. There is blog entry for [[http://blog.drtebi.com/2012/12/changing-dpi-setting-on-gnome-34.html][recompiling Gnome Settings Daemon]]^{[[[https://en.wikipedia.org/wiki/Wikipedia:Link_rot][dead link]] 2022-09-18 ⓘ]}. In the source documentation there is another way mentioned to set X settings DPI:

You can use the gsettings, just make sure to read previous setting first and merge it. In just simply set it with this command:

#+begin_src
$ gsettings set org.gnome.settings-daemon.plugins.xsettings overrides "{'Xft/DPI': <153600>}"
#+end_src
#+end_quote


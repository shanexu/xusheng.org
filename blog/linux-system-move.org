#+TITLE:       Linux系统搬家
#+AUTHOR:      Shane Xu
#+EMAIL:       shane@192.168.3.136
#+DATE:        2024-07-27 Sat
#+URI:         /blog/%y/%m/%d/linux-system-move
#+KEYWORDS:    linux
#+TAGS:        linux
#+LANGUAGE:    en
#+OPTIONS:     H:3 num:nil toc:nil \n:nil ::t |:t ^:nil -:nil f:t *:t <:t
#+DESCRIPTION: <TODO: insert your description here>

* 起因
终于有大片的时间让我得以解决长期困扰我的问题——系统空间不足。之前做了权宜之计，
将 ~/home/<用户名>/Downloads~ 、 ~/home/<用户名>/src~  、 ~/home/<用户名>/OneDrive~
三个目录搬到一块2014买的256G的三星固态硬盘上。2014年啊，可见当时是多无奈。
遂决定购置一块1TB的新硬盘插到机器上，然后将 ~/~ 整体搬到新硬盘上，然后将老硬盘（500GB）
分一个区，作为 ~/home~ 的挂载点。

* 实操

** 现状
使用fdkis命令查看现状
#+begin_src shell
sudo fdisk -l
#+end_src

这里简化下输出
#+begin_src text

#+end_src

** 克隆系统
使用liveCD启动系统后克隆磁盘
#+begin_src shell
dd if=/dev/sda of=/dev/sdb bs=64K conv=noerror,sync status=progress
#+end_src

** 调整磁盘UUID

** 老磁盘格式化并创建分区，并复制数据

** 调整配置文件 ~/etc/fstab~

** 重新安装grub

** 调整新磁盘的分区大小

** 重启祈福
